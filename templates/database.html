{% extends 'content.html' %}
{% block h %}
    {% if messages %}
        <script src="/static/js/jquery-2.1.1.js"></script>
        <script src="/static/js/toastr.min.js"></script>
        <link href="/static/css/toastr.min.css" rel="stylesheet"/>
        <script type="text/javascript">
            toastr.options.positionClass = 'toast-top-center';
            {% for msg in messages %}
                toastr.info('{{ msg.message }}');
            {% endfor %}
        </script>
    {% endif %}

    <!-- /. NAV SIDE  -->
    <div id="page-wrapper">
        <div class="header">
            <h3 class="page-header">
                数据库信息
            </h3>
        </div>
        <div id="panel panel-default">
            <div class="col-md-12">
                <!-- Advanced Tables -->
                <div class="panel panel-default">
                    <div class="panel-body">
                        <div class="table-responsive">
                            <div>
                                <table id="table" class="table table-striped table-bordered table-hover">
                                </table>
                            </div>
                            <a data-toggle="modal" href="#" data-target="#databaseModal"><i
                                    class="glyphicon glyphicon-chevron-right"></i> 添加数据库信息</a>

                        </div>
                    </div>
                </div>
            </div>

        </div>
        <div class="modal fade" id="databaseModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel"
             aria-hidden="true">
            <div class="modal-dialog" style="width: 250px">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;
                        </button>
                        <h4 class="modal-title" id="myModalLabel">端口检测</h4>
                    </div>
                    <div class="panel-body">
                        <form action="{% url 'addDatabase' %}" method="post" class="form-horizontal" id="id_form">
                            {% csrf_token %}
                            <div class="modal-body">
                                <h4 class="modal-title">数据库类型：</h4>
                                <label>
                                    {{ form.dataGroup }}
                                </label>
                                <h4 class="modal-title">名称：</h4>
                                <label>
                                    {{ form.name }}
                                </label>
                                <h4 class="modal-title">IP地址：</h4>
                                <label>
                                    {{ form.ip }}
                                </label>
                                <h4 class="modal-title">用户名：</h4>
                                <label>
                                    {{ form.user }}
                                </label>
                                <h4 class="modal-title">密码：</h4>
                                <label>
                                    {{ form.password }}
                                </label>
                                <h4 class="modal-title">端口：</h4>
                                <label>
                                    {{ form.port }}
                                </label>
                                <h4 class="modal-title">版本：</h4>
                                <label>
                                    {{ form.edition }}
                                </label>
                                <h4 class="modal-title">备注：</h4>
                                <label>
                                    {{ form.remark }}
                                </label>
                                <label hidden>
                                    <input type="text" name="uid" id="id_uid" placeholder="选填" class="form-control">
                                </label>
                                <button class="btn btn-default" type="submit" id="id_btn"
                                        style="margin-top:15px;margin-left: 60px;color:#fff;background-color:#2caef5;border-color:#2caef5;border-style:solid">
                                    添加
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
{% block js %}
    <script src="/static/assets/js/jquery-1.10.2.js"></script>
    <script src="/static/assets/js/bootstrap.min.js"></script>
    <script src="/static/assets/js/jquery.metisMenu.js"></script>
    <script src="/static/assets/js/dataTables/bootstrap-table.js"></script>
    <script type="text/javascript" src="/static/js/jquery-ui.js"></script>
    <script src="/static/js/databases.js"></script>
    <script src="/static/js/custom.js"></script>
    <script>
        $(document).ready(function () {
            $('#database').attr('class', 'active-menu');
            dataBaseTable();
        });
    </script>
{% endblock %}

